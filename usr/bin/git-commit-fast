#!/bin/bash
source /usr/lib/elive-tools/functions

git diff
git status

echo -e ""
echo -e "Going to commit everything listed, press ^C for cancel"
echo -e "Message?"
read -e message

git commit -am "$message"

if el_confirm "Push now?" ; then
    echo ""
    result="$( LC_ALL=C command git push 2>&1 | grep -v "Warning: Permanently added" )"
    echo "$result"

    if echo "$result" | grep -qs "Everything up-to-date" ; then
        el_warning "nothing pushed"
    else
        el_info "pushed"
    fi
else
    echo ""
fi
