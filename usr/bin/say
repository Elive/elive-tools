#!/bin/bash
main(){
    # pre {{{
    local text is_stdin

    if [[ ! -t 0 ]] ; then
        is_stdin=1
    fi

    # }}}
    if ((is_stdin)) ; then
        text="$( cat 2>&1 | sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g" )"
    else
        text="$@"
    fi


    mplayer -user-agent Mozilla -af volume=6:0 "http://translate.google.com/translate_tts?tl=en&q=$(echo "$text" | sed 's#\ #\+#g')" > /dev/null 2>&1
}

#
#  MAIN
#
main "$@"

# vim: set foldmethod=marker :

